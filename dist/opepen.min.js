"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const randseed=[,,,,];function seedrand(a){randseed.fill(0);for(let b=0;b<a.length;b++)randseed[b%4]=(randseed[b%4]<<5)-randseed[b%4]+a.charCodeAt(b)}function rand(){const a=randseed[0]^randseed[0]<<11;return randseed[0]=randseed[1],randseed[1]=randseed[2],randseed[2]=randseed[3],randseed[3]=randseed[3]^randseed[3]>>19^a^a>>8,(randseed[3]>>>0)/2147483648}function createColor(){const a=Math.floor(360*rand()),b=60*rand()+40+"%",c=25*(rand()+rand()+rand()+rand())+"%";return"hsl("+a+","+b+","+c+")"}function createImageData(a){const b=a,c=Math.ceil(b/2),d=[];for(let e,f=0;f<a;f++){e=[];for(let a=0;a<c;a++)e[a]=Math.floor(2.3*rand());const a=e.slice(0,b-c);a.reverse(),e=e.concat(a);for(let a=0;a<e.length;a++)d.push(e[a])}return d}function buildOpts(a){const b={},c=a.size/8;return b.seed=a.seed||Math.floor(10000000000000000*Math.random()).toString(16),seedrand(b.seed),b.size=8,b.scale=c||4,b.color=a.color||createColor(),b.bgcolor=a.bgcolor||createColor(),b.spotcolor=a.spotcolor||createColor(),b}const opepenGrid=[{row:3,col:3,type:"square"},{row:3,col:4,type:"arc",rotation:"topRight"},{row:3,col:5,type:"arc",rotation:"topLeft"},{row:3,col:6,type:"arc",rotation:"topRight"},{row:4,col:3,type:"arc",rotation:"bottomLeft"},{row:4,col:5,type:"arc",rotation:"bottomLeft"},{row:5,col:3,type:"square"},{row:5,col:4,type:"square"},{row:5,col:5,type:"square"},{row:5,col:6,type:"square"},{row:6,col:3,type:"arc",rotation:"bottomLeft"},{row:6,col:4,type:"square"},{row:6,col:5,type:"square"},{row:6,col:6,type:"arc",rotation:"bottomRight"},{row:8,col:3,type:"arc",rotation:"topLeft"},{row:8,col:4,type:"square"},{row:8,col:5,type:"square"},{row:8,col:6,type:"arc",rotation:"topRight"}];function renderIcon(a,b){var c=Math.PI,d=Math.floor;a=buildOpts(a||{});const e=createImageData(a.size),f=Math.sqrt(e.length);b.width=b.height=a.size*a.scale;const g=b.getContext("2d");g.fillStyle=a.bgcolor,g.fillRect(0,0,b.width,b.height),g.fillStyle=a.color;for(let h=0;h<e.length;h++){const b=d(h/f),i=h%f,j=opepenGrid.find(a=>a.row===b+1&&a.col===i+1);if((0===b||0===i||i===f-1)&&e[h]){const b=d(h/f),c=h%f;g.fillStyle=1==e[h]?a.color:a.spotcolor,g.fillRect(c*a.scale,b*a.scale,a.scale,a.scale)}j&&(g.fillStyle=1==e[h]?a.color:a.spotcolor,"square"===j.type&&g.fillRect(i*a.scale,b*a.scale,a.scale,a.scale),"arc"===j.type&&(g.beginPath(),"topLeft"===j.rotation&&(g.moveTo((i+1)*a.scale,(b+1)*a.scale+a.scale),g.lineTo((i+1)*a.scale,(b+1)*a.scale),g.arc((i+1)*a.scale,(b+1)*a.scale,a.scale,Math.PI,1.5*c,!1),g.lineTo((i+1)*a.scale,(b+1)*a.scale+a.scale)),"topRight"===j.rotation&&(g.moveTo((i-1)*a.scale+a.scale,b*a.scale+a.scale),g.lineTo((i-1)*a.scale+a.scale,b*a.scale),g.arc((i-1)*a.scale+a.scale,b*a.scale+a.scale,a.scale,1.5*c,2*c),g.lineTo((i-1)*a.scale+a.scale,b*a.scale+a.scale)),"bottomLeft"===j.rotation&&(g.moveTo((i+1)*a.scale,(b-1)*a.scale+a.scale),g.lineTo((i+1)*a.scale,(b-1)*a.scale+a.scale),g.arc((i+1)*a.scale,(b-1)*a.scale+a.scale,a.scale,.5*c,Math.PI,!1),g.lineTo((i+1)*a.scale,(b-1)*a.scale+a.scale)),"bottomRight"===j.rotation&&(g.moveTo((i-1)*a.scale+a.scale,(b-1)*a.scale),g.lineTo((i-1)*a.scale+a.scale,(b-1)*a.scale+a.scale),g.arc((i-1)*a.scale+a.scale,(b-1)*a.scale+a.scale,a.scale,0,.5*c,!1),g.lineTo((i-1)*a.scale+a.scale,(b-1)*a.scale)),g.closePath(),g.fill()))}return b}function createIcon(a){var b=document.createElement("canvas");return renderIcon(a,b),b}exports.renderIcon=renderIcon,exports.createIcon=createIcon;